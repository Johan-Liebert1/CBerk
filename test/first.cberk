include "../examples/include/std.cberk"

struct sockaddr_in {
    sa_prefix: int16
    sin_port: int16,
    s_addr: int32,
    pad: int,
};

fun main() {
    def AF_INET: int16 = 2;
    def S_ADDR: int32 = 0;
    def PORT: int16 = 5000;
    def PAD: int = 0;

    def sockaddr: sockaddr_in = sockaddr_in{
        sa_prefix: AF_INET
        sin_port: PORT,
        s_addr: S_ADDR,
        pad: PAD,
    };

    write(sockaddr.sa_prefix)
    write(sockaddr.sin_port)

    sockaddr.sa_prefix = 1;
    sockaddr.sin_port = 6969;

    -- memset(thing, 0, 16);
    -- write(AF_INET)
    -- write("S_ADDR = ", S_ADDR)
    -- write("PORT = ", PORT)
    -- write("PAD = ", PAD)

    write(sockaddr.sa_prefix)
    write("sin_port ", sockaddr.sin_port)
    -- write("s_addr ", sockaddr.s_addr)
    -- write("pad ", sockaddr.pad)
}

main()
